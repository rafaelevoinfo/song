

ALTER TABLE ESPECIE
    ADD BIOMA VARCHAR(20);

ALTER TABLE ESPECIE
    ALTER EXOTICA TO CLASSIFICACAO;

ALTER TABLE ESPECIE
    ALTER CLASSIFICACAO TYPE SMALLINT;

COMMENT ON COLUMN ESPECIE.CLASSIFICACAO IS
'Classificacao da especie
0 - Pioneiras
1 - Secundarias
2 - Climax';

COMMENT ON COLUMN ESPECIE.BIOMA IS
'Bioma da especie (campo conterar o Editvalue de um cxCheckComboBox)
0 - Amazonia
1 - Cerrado
2 - Mata Atlantica
3 - Caatinga
4 - Pampa
5 - Pantanal';



ALTER TABLE PATRIMONIO
    ADD RESPONSAVEL INTEGER;

alter table PATRIMONIO
alter ID position 1;

alter table PATRIMONIO
alter ID_ITEM_PATRIMONIO position 2;

alter table PATRIMONIO
alter RESPONSAVEL position 3;

alter table PATRIMONIO
alter DATA_AQUISICAO position 4;

alter table PATRIMONIO
alter IDENTIFICACAO position 5;

alter table PATRIMONIO
alter MARCA position 6;

alter table PATRIMONIO
alter MODELO position 7;

alter table PATRIMONIO
alter VALOR_INICIAL position 8;

alter table PATRIMONIO
alter TAXA_DEPRECIACAO_ANUAL position 9;

alter table PATRIMONIO
alter LOCALIZACAO position 10;

alter table PATRIMONIO
alter NOTA_FISCAL position 11;

alter table PATRIMONIO
alter STATUS position 12;

alter table PATRIMONIO
alter OBSERVACAO position 13;



ALTER TABLE PATRIMONIO
    ALTER RESPONSAVEL TO ID_PESSOA_RESPONSAVEL;

COMMENT ON COLUMN PATRIMONIO.ID_PESSOA_RESPONSAVEL IS
'Pessoa responsavel por este patrimonio';



alter table PATRIMONIO
alter ID position 1;

alter table PATRIMONIO
alter ID_ITEM_PATRIMONIO position 2;

alter table PATRIMONIO
alter DATA_AQUISICAO position 3;

alter table PATRIMONIO
alter ID_PESSOA_RESPONSAVEL position 4;

alter table PATRIMONIO
alter IDENTIFICACAO position 5;

alter table PATRIMONIO
alter MARCA position 6;

alter table PATRIMONIO
alter MODELO position 7;

alter table PATRIMONIO
alter VALOR_INICIAL position 8;

alter table PATRIMONIO
alter TAXA_DEPRECIACAO_ANUAL position 9;

alter table PATRIMONIO
alter LOCALIZACAO position 10;

alter table PATRIMONIO
alter NOTA_FISCAL position 11;

alter table PATRIMONIO
alter STATUS position 12;

alter table PATRIMONIO
alter OBSERVACAO position 13;



ALTER TABLE PATRIMONIO
ADD CONSTRAINT FK_PATRIMONIO_2
FOREIGN KEY (ID_PESSOA_RESPONSAVEL)
REFERENCES PESSOA(ID)
ON UPDATE CASCADE;



DROP TABLE CONTA_RECEBER_ATIVIDADE;



DROP TABLE CONTA_RECEBER_PROJETO;



COMMENT ON COLUMN ESPECIE.BIOMA IS
'';



ALTER TABLE ESPECIE DROP BIOMA;



CREATE TABLE ESPECIE_BIOMA (
    ID INTEGER NOT NULL,
    ID_ESPECIE INTEGER NOT NULL,
    BIOMA SMALLINT NOT NULL);

ALTER TABLE ESPECIE_BIOMA
ADD CONSTRAINT PK_ESPECIE_BIOMA
PRIMARY KEY (ID);

COMMENT ON COLUMN ESPECIE_BIOMA.BIOMA IS
'Bioma da especie (campo conterar o Editvalue de um cxCheckComboBox)
0 - Amazonia
1 - Cerrado
2 - Mata Atlantica
3 - Caatinga
4 - Pampa
5 - Pantanal';

CREATE SEQUENCE GEN_ESPECIE_BIOMA;



ALTER TABLE ESPECIE_BIOMA
ADD CONSTRAINT FK_ESPECIE_BIOMA_1
FOREIGN KEY (ID_ESPECIE)
REFERENCES ESPECIE(ID)
ON DELETE CASCADE
ON UPDATE CASCADE;



COMMENT ON COLUMN ESPECIE_BIOMA.BIOMA IS
'Bioma da especie (campo conterar o Editvalue de um cxCheckComboBox)
0 - Amazonia
1 - Cerrado
2 - Mata Atlantica
3 - Caatinga
4 - Pampa
5 - Pantanal
6 - Exotico (Bioma que nao e brasileiro)';



ALTER TABLE ESPECIE
    ADD ID_TIPO_ESPECIE INTEGER;

alter table ESPECIE
alter ID position 1;

alter table ESPECIE
alter NOME position 2;

alter table ESPECIE
alter NOME_CIENTIFICO position 3;

alter table ESPECIE
alter ID_FAMILIA_BOTANICA position 4;

alter table ESPECIE
alter ID_TIPO_ESPECIE position 5;

alter table ESPECIE
alter VALOR_MUDA position 6;

alter table ESPECIE
alter VALOR_KG_SEMENTE position 7;

alter table ESPECIE
alter TEMPO_GERMINACAO position 8;

alter table ESPECIE
alter QTDE_SEMENTE_KILO position 9;

alter table ESPECIE
alter QTDE_SEMENTE_ESTOQUE position 10;

alter table ESPECIE
alter QTDE_MUDA_PRONTA position 11;

alter table ESPECIE
alter QTDE_MUDA_DESENVOLVIMENTO position 12;

alter table ESPECIE
alter TEMPO_DESENVOLVIMENTO position 13;

alter table ESPECIE
alter OBSERVACAO position 14;

alter table ESPECIE
alter MES_INICIO_COLETA position 15;

alter table ESPECIE
alter MES_FIM_COLETA position 16;

alter table ESPECIE
alter PESO_MEDIO_SEMENTE position 17;

alter table ESPECIE
alter QTDE_SEMENTE_TUBETE position 18;

alter table ESPECIE
alter CLASSIFICACAO position 19;



CREATE TABLE TIPO_ESPECIE (
    ID INTEGER NOT NULL,
    NOME D_NOME NOT NULL,
    DESCRICAO D_DESCRICAO);

ALTER TABLE TIPO_ESPECIE
ADD CONSTRAINT PK_TIPO_ESPECIE
PRIMARY KEY (ID);

CREATE SEQUENCE GEN_TIPO_ESPECIE;



ALTER TABLE ESPECIE
    ADD CATEGORIA_ARMAZENAMENTO SMALLINT;

COMMENT ON COLUMN ESPECIE.CATEGORIA_ARMAZENAMENTO IS
'0 - Ortodoxas
1 - Recalcitrantes
2 - Intermediaria';



ALTER TABLE ESPECIE
ADD CONSTRAINT FK_ESPECIE_2
FOREIGN KEY (ID_TIPO_ESPECIE)
REFERENCES TIPO_ESPECIE(ID)
ON UPDATE CASCADE;


insert into especie_bioma(especie_bioma.id, especie_bioma.id_especie, especie_bioma.bioma)
select next value for gen_especie_bioma,  especie.id, 1 from especie;


CREATE TABLE MIX_MUDA (
    ID INTEGER NOT NULL,
    ID_CLIENTE INTEGER NOT NULL,
    ID_PESSOA_RESPONSAVEL INTEGER NOT NULL,
    DATA DATE NOT NULL,
    QTDE_MUDA INTEGER NOT NULL,
    QTDE_MUDA_ROCAMBOLE INTEGER NOT NULL,
    DESCRICAO D_DESCRICAO);

ALTER TABLE MIX_MUDA
ADD CONSTRAINT PK_MIX_MUDA
PRIMARY KEY (ID);

CREATE SEQUENCE GEN_MIX_MUDA;



COMMENT ON TABLE MIX_MUDA IS 'Mix de mudas a serem despechadas para o campo para reflorestamento';



ALTER TABLE MIX_MUDA
ADD CONSTRAINT FK_MIX_MUDA_1
FOREIGN KEY (ID_CLIENTE)
REFERENCES FIN_FOR_CLI(ID)
ON UPDATE CASCADE;

ALTER TABLE MIX_MUDA
ADD CONSTRAINT FK_MIX_MUDA_2
FOREIGN KEY (ID_PESSOA_RESPONSAVEL)
REFERENCES PESSOA(ID)
ON UPDATE CASCADE;



COMMENT ON COLUMN MIX_MUDA.QTDE_MUDA IS
'Quantidade de mudas que serao despachadas';



COMMENT ON COLUMN MIX_MUDA.QTDE_MUDA_ROCAMBOLE IS
'Quantidade de mudas por rocambole (Normalmente sao 30)';



CREATE TABLE MIX_MUDA_ESPECIE (
    ID INTEGER NOT NULL,
    ID_MIX_MUDA INTEGER NOT NULL,
    ID_ESPECIE INTEGER NOT NULL);

ALTER TABLE MIX_MUDA_ESPECIE
ADD CONSTRAINT PK_MIX_MUDA_ESPECIE
PRIMARY KEY (ID);

CREATE SEQUENCE GEN_MIX_MUDA_ESPECIE;



ALTER TABLE MIX_MUDA_ESPECIE
ADD CONSTRAINT FK_MIX_MUDA_ESPECIE_1
FOREIGN KEY (ID_MIX_MUDA)
REFERENCES MIX_MUDA(ID)
ON DELETE CASCADE
ON UPDATE CASCADE;

ALTER TABLE MIX_MUDA_ESPECIE
ADD CONSTRAINT FK_MIX_MUDA_ESPECIE_2
FOREIGN KEY (ID_ESPECIE)
REFERENCES ESPECIE(ID)
ON UPDATE CASCADE;



CREATE TABLE MIX_MUDA_ESPECIE_CANTEIRO (
    ID INTEGER NOT NULL,
    ID_MIX_MUDA_ESPECIE INTEGER NOT NULL,
    ID_CANTEIRO INTEGER NOT NULL,
    ID_LOTE_MUDA INTEGER NOT NULL,
    QTDE INTEGER NOT NULL);

ALTER TABLE MIX_MUDA_ESPECIE_CANTEIRO
ADD CONSTRAINT PK_MIX_MUDA_ESPECIE_CANTEIRO
PRIMARY KEY (ID);

CREATE SEQUENCE GEN_MIX_MUDA_ESPECIE_CANTEIRO;



ALTER TABLE MIX_MUDA_ESPECIE_CANTEIRO
ADD CONSTRAINT FK_MIX_MUDA_ESPECIE_CANTEIRO_1
FOREIGN KEY (ID_MIX_MUDA_ESPECIE)
REFERENCES MIX_MUDA_ESPECIE(ID)
ON DELETE CASCADE
ON UPDATE CASCADE;

ALTER TABLE MIX_MUDA_ESPECIE_CANTEIRO
ADD CONSTRAINT FK_MIX_MUDA_ESPECIE_CANTEIRO_2
FOREIGN KEY (ID_CANTEIRO)
REFERENCES CANTEIRO(ID)
ON UPDATE CASCADE;

ALTER TABLE MIX_MUDA_ESPECIE_CANTEIRO
ADD CONSTRAINT FK_MIX_MUDA_ESPECIE_CANTEIRO_3
FOREIGN KEY (ID_LOTE_MUDA)
REFERENCES LOTE_MUDA(ID)
ON UPDATE CASCADE;



CREATE TABLE MIX_MUDA_ESPECIE_LOTE (
    ID INTEGER NOT NULL,
    ID_MIX_MUDA_ESPCECIE INTEGER NOT NULL,
    ID_LOTE_MUDA INTEGER NOT NULL,
    QTDE INTEGER NOT NULL);

ALTER TABLE MIX_MUDA_ESPECIE_LOTE
ADD CONSTRAINT PK_MIX_MUDA_ESPECIE_LOTE
PRIMARY KEY (ID);

CREATE SEQUENCE GEN_MIX_MUDA_ESPECIE_LOTE;



ALTER TABLE MIX_MUDA_ESPECIE_LOTE
ADD CONSTRAINT FK_MIX_MUDA_ESPECIE_LOTE_1
FOREIGN KEY (ID_MIX_MUDA_ESPCECIE)
REFERENCES MIX_MUDA_ESPECIE(ID)
ON DELETE CASCADE
ON UPDATE CASCADE;

ALTER TABLE MIX_MUDA_ESPECIE_LOTE
ADD CONSTRAINT FK_MIX_MUDA_ESPECIE_LOTE_2
FOREIGN KEY (ID_LOTE_MUDA)
REFERENCES LOTE_MUDA(ID)
ON UPDATE CASCADE;



DROP TABLE MIX_MUDA_ESPECIE_CANTEIRO;



DROP SEQUENCE GEN_MIX_MUDA_ESPECIE_CANTEIRO;



ALTER TABLE MIX_MUDA
    ADD ID_VENDA INTEGER;

alter table MIX_MUDA
alter ID position 1;

alter table MIX_MUDA
alter ID_CLIENTE position 2;

alter table MIX_MUDA
alter ID_PESSOA_RESPONSAVEL position 3;

alter table MIX_MUDA
alter ID_VENDA position 4;

alter table MIX_MUDA
alter DATA position 5;

alter table MIX_MUDA
alter QTDE_MUDA position 6;

alter table MIX_MUDA
alter QTDE_MUDA_ROCAMBOLE position 7;

alter table MIX_MUDA
alter DESCRICAO position 8;



ALTER TABLE MIX_MUDA
ADD CONSTRAINT FK_MIX_MUDA_3
FOREIGN KEY (ID_VENDA)
REFERENCES VENDA(ID)
ON UPDATE CASCADE;



COMMENT ON COLUMN MIX_MUDA.ID_VENDA IS
'Id da venda gerada para esse mix de muda';

