

ALTER TABLE ORCAMENTO_ITEM
    ADD TAMANHO NUMERIC(15,2);

COMMENT ON COLUMN ORCAMENTO_ITEM.TAMANHO IS
'Tamanho da muda';

alter table ORCAMENTO_ITEM
alter ID position 1;

alter table ORCAMENTO_ITEM
alter ID_ORCAMENTO position 2;

alter table ORCAMENTO_ITEM
alter ID_ITEM position 3;

alter table ORCAMENTO_ITEM
alter ID_ESPECIE position 4;

alter table ORCAMENTO_ITEM
alter QTDE position 5;

alter table ORCAMENTO_ITEM
alter TAMANHO position 6;

alter table ORCAMENTO_ITEM
alter VALOR_UNITARIO position 7;



ALTER TABLE ORCAMENTO
    ADD ID_VENDA INTEGER,
    ADD ID_SAIDA INTEGER;



ALTER TABLE ORCAMENTO DROP CONSTRAINT FK_ORCAMENTO_1;

ALTER TABLE ORCAMENTO
ADD CONSTRAINT FK_ORCAMENTO_1
FOREIGN KEY (ID_MODELO_ORCAMENTO)
REFERENCES MODELO_ORCAMENTO(ID)
ON UPDATE CASCADE
USING INDEX FK_ORCAMENTO_1;

ALTER TABLE ORCAMENTO DROP CONSTRAINT FK_ORCAMENTO_2;

ALTER TABLE ORCAMENTO
ADD CONSTRAINT FK_ORCAMENTO_2
FOREIGN KEY (ID_RESPONSAVEL)
REFERENCES PESSOA(ID)
ON UPDATE CASCADE
USING INDEX FK_ORCAMENTO_2;

ALTER TABLE ORCAMENTO DROP CONSTRAINT FK_ORCAMENTO_3;

ALTER TABLE ORCAMENTO
ADD CONSTRAINT FK_ORCAMENTO_3
FOREIGN KEY (ID_CLIENTE)
REFERENCES FIN_FOR_CLI(ID)
ON UPDATE CASCADE
USING INDEX FK_ORCAMENTO_3;

ALTER TABLE ORCAMENTO
ADD CONSTRAINT FK_ORCAMENTO_4
FOREIGN KEY (ID_VENDA)
REFERENCES VENDA(ID)
ON UPDATE CASCADE;

ALTER TABLE ORCAMENTO
ADD CONSTRAINT FK_ORCAMENTO_5
FOREIGN KEY (ID_SAIDA)
REFERENCES SAIDA(ID)
ON UPDATE CASCADE;



ALTER TABLE ORCAMENTO DROP CONSTRAINT FK_ORCAMENTO_4;

ALTER TABLE ORCAMENTO
ADD CONSTRAINT FK_ORCAMENTO_4
FOREIGN KEY (ID_VENDA)
REFERENCES VENDA(ID)
ON DELETE SET NULL
ON UPDATE CASCADE
USING INDEX FK_ORCAMENTO_4;

ALTER TABLE ORCAMENTO DROP CONSTRAINT FK_ORCAMENTO_5;

ALTER TABLE ORCAMENTO
ADD CONSTRAINT FK_ORCAMENTO_5
FOREIGN KEY (ID_SAIDA)
REFERENCES SAIDA(ID)
ON DELETE SET NULL
ON UPDATE CASCADE
USING INDEX FK_ORCAMENTO_5;



CREATE TABLE PROJETO_RUBRICA_PAGTO (
    ID INTEGER NOT NULL,
    ID_PROJETO_RUBRICA INTEGER NOT NULL,
    ID_PROJETO_FINANCIADOR_PAGTO INTEGER NOT NULL,
    VALOR NUMERIC(15,2) NOT NULL);

ALTER TABLE PROJETO_RUBRICA_PAGTO
ADD CONSTRAINT PK_PROJETO_RUBRICA_PAGTO
PRIMARY KEY (ID);

CREATE SEQUENCE GEN_PROJETO_RUBRICA_PAGTO;



ALTER TABLE PROJETO_RUBRICA_PAGTO
ADD CONSTRAINT FK_PROJETO_RUBRICA_PAGTO_1
FOREIGN KEY (ID_PROJETO_RUBRICA)
REFERENCES PROJETO_RUBRICA(ID)
ON UPDATE CASCADE;

ALTER TABLE PROJETO_RUBRICA_PAGTO
ADD CONSTRAINT FK_PROJETO_RUBRICA_PAGTO_2
FOREIGN KEY (ID_PROJETO_FINANCIADOR_PAGTO)
REFERENCES PROJETO_FINANCIADOR_PAGTO(ID)
ON DELETE CASCADE
ON UPDATE CASCADE;



CREATE TABLE PROJETO_FINAN_PAGTO_RUBRICA (
    ID INTEGER NOT NULL,
    ID_PROJETO_RUBRICA INTEGER NOT NULL,
    ID_PROJETO_FINANCIADOR_PAGTO INTEGER NOT NULL,
    VALOR NUMERIC(15,2) NOT NULL);

ALTER TABLE PROJETO_FINAN_PAGTO_RUBRICA
ADD CONSTRAINT PK_PROJETO_FINAN_PAGTO_RUBRICA
PRIMARY KEY (ID);

CREATE SEQUENCE GEN_PROJETO_FINAN_PAGTO_RUBRICA;



ALTER TABLE PROJETO_RUBRICA_PAGTO DROP CONSTRAINT FK_PROJETO_RUBRICA_PAGTO_2;



ALTER TABLE PROJETO_RUBRICA_PAGTO DROP CONSTRAINT FK_PROJETO_RUBRICA_PAGTO_1;



DROP TABLE PROJETO_RUBRICA_PAGTO;



DROP SEQUENCE GEN_PROJETO_RUBRICA_PAGTO;



ALTER TABLE PROJETO_FINAN_PAGTO_RUBRICA
ADD CONSTRAINT FK_PROJETO_FINANCIADOR_PAGTO
FOREIGN KEY (ID_PROJETO_FINANCIADOR_PAGTO)
REFERENCES PROJETO_FINANCIADOR_PAGTO(ID)
ON DELETE CASCADE
ON UPDATE CASCADE;

